generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Order {
  id                 String               @id @default(cuid())
  job_number         Int                  @unique @default(autoincrement())
  job_name           String
  // Relations (1-to-1)
  basic_info         BasicInfo?
  proofing           Proofing?
  shipping_info      ShippingInfo?
  files              Files?
  additional_info    AdditionalInfo?
  outsource_materials OutsourceMaterials?
}

model BasicInfo {
  id          String   @id @default(cuid())
  client      String
  contact     String
  po_number   String   @unique
  sales_rep   String
  order       Order?   @relation(fields: [orderId], references: [id])
  orderId     String?  @unique
}

model Proofing {
  id             String   @id @default(cuid())
  isRequired     Boolean  @default(false)
  status         String   @default("Not Started")
  dueDate        DateTime?
  notes          String?
  revisions      Int      @default(0)
  order          Order?   @relation(fields: [orderId], references: [id])
  orderId        String?  @unique
  @@map("proofing")
}

model ShippingInfo {
  id          String   @id @default(cuid())
  dueDate     DateTime?
  shipTo      String   @default("Pick Up")
  shipMethod  String?
  account     String?
  notes       String?
  order       Order?   @relation(fields: [orderId], references: [id])
  orderId     String?  @unique
  @@map("shipping_info")
}

model Files {
  id          String   @id @default(cuid())
  fileSource  String   @default("Inprintz FTP")
  folderPath  String?
  fileName    String?
  notes       String?
  order       Order?   @relation(fields: [orderId], references: [id])
  orderId     String?  @unique
  @@map("files")
}

model AdditionalInfo {
  id          String   @id @default(cuid())
  notes       String?
  order       Order?   @relation(fields: [orderId], references: [id])
  orderId     String?  @unique
  @@map("additional_info")
}

model OutsourceMaterials {
  id            String   @id @default(cuid())
  hardware      String?
  installation  String?
  order         Order?   @relation(fields: [orderId], references: [id])
  orderId       String?  @unique
  @@map("outsource_materials")
}